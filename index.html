<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
    </head>
    <body>
        <h1>
            HTML Forms
        </h1>

        <form id="userForm">
            <label>
                Name
                <input type="text" id="name">
            </label>
            <br />
            <label>
                Age
                <input type="number" id="age">
            </label>
            <br />
            <label>
                Gender
            </label>
            <input type="radio" id="gender" class="gender" value="Male" />Male
            <input type="radio" id="gender" class="gender" value="Female">Female
            <input type="radio" id="gender" class="gender" value="Other">Other
            <br />

            <label>Country
                <select id="country">
                    <option value>Select</option>
                    <option>India</option>
                    <option>USA</option>
                    <option>Japan</option>
                    <option>China</option>

                </select>
            </label>

            <br />

            <label>Technological Stack</label>
            <input type="checkbox" value="HTML" class="tech" />HTML
            <input type="checkbox" value="CSS" class="tech" />CSS
            <input type="checkbox" value="JavaScript" class="tech" />JavaScript
            <input type="checkbox" value="React" class="tech" />React
            <input type="checkbox" value="React-Native"
                class="tech" />React-Native

            <br />

            <label>Address
                <textarea id="address" rows="4"></textarea>
            </label>

            <br />
            <label>Telephone
                <input type="tel" id="telephone">
            </label>

            <br />
            <label>Email
                <input type="email" id="email">
            </label>
            <br />
            <button type="reset">Reset</button>
            <br />
            <button type="submit" onclick="submitForm()">Submit</button>

        </form>
        <h1 id="tableHeader" style="display: none">Table</h1>
        <table id="resultTable" style="display: none">

            <thead>
                <tr>
                    <th>Name</th>
                    <th>Age</th>
                    <th>Gender</th>
                    <th>Country</th>
                    <th>Tech Stack</th>
                    <th>Address</th>
                    <th>Telephone</th>
                    <th>Email</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>

        <script>
            function submitForm() {
                const form = document.getElementById('userForm');
                form.addEventListener('submit', function(e) {
                e.preventDefault();           
                });

                const name = document.getElementById("name").value.trim();
                const age = document.getElementById("age").value.trim();
                const country = document.getElementById("country").value;
                const address = document.getElementById("address").value.trim();
                const phone = document.getElementById("telephone").value.trim();
                const email = document.getElementById("email").value.trim();

                const genderEl = document.querySelector('.gender:checked');
                const techEls = document.querySelectorAll(".tech:checked");
                
                // console.log(name,age, country,address,phone,email,genderEl,techEls)
                if (
                !name ||
                !age ||
                !genderEl ||
                !country ||
                !address ||
                !phone ||
                !email ||
                techEls.length === 0
                ) {
                alert("All fields are mandatory");
                return;
                }

                if (isNaN(age)) {
                alert("Age must be a number");
                return;
                }

                if (!/^\d+$/.test(phone)) {
                alert("Telephone must contain only numbers");
                return;
                }

                if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                alert("Invalid email format");
                return;
                }

                const techStack = Array.from(techEls)
                    .map((el) => el.value)
                    .join(", ");
                
                const table = document.getElementById("resultTable");
                const tbody = table.querySelector("tbody");
                const row = tbody.insertRow();

                row.insertCell(0).innerText = name;
                row.insertCell(1).innerText = age;
                row.insertCell(2).innerText = genderEl.value;
                row.insertCell(3).innerText = country;
                row.insertCell(4).innerText = techStack;
                row.insertCell(5).innerText = address;
                row.insertCell(6).innerText = phone;
                row.insertCell(7).innerText = email;

                table.style.display = "table";
                document.getElementById("tableHeader").style.display="block";
        
                document.getElementById("userForm").reset();
            }
        </script>
    </body>

</html>